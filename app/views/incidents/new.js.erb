// Add the dialog title
$('#dialog h3').html("<i class='glyphicon glyphicon-plus'></i> Add New Incident");
 
// Render the new form
$('.modal-body').html('<%= j render("form") %>');
 
// Show the dynamic dialog
$('#dialog').modal("show");
 
// Set focus to the first element
$('#dialog').on('shown.bs.modal', function () {
	  $('.first_input').focus()
  })

$('#date_reported').datetimepicker();

$('#date_of_incident').datetimepicker();

$('#incident_location_id').on('change', function() {
	if ( this.value == 1)
	{
	  $("div#loc-fac").show();
	  $("div#loc-area").show();
	  $("div#loc-address").show();
	}
	else if (this.value == 2)
	{
	  $("div#loc-fac").hide();
	  $("div#loc-area").hide();
	  $("div#loc-address").show();
	}
	else
	{
	  $("div#loc-fac").hide();
	  $("div#loc-area").hide();
	  $("div#loc-address").hide();
	}
}).trigger('change');

$('#incident_facility_id').on('change', function() {
	if ((this.value == 1) && (document.getElementById("incident_location_id").value == 1))
	{
		$("#incident_physical_address").val("<%= Facility.find(1).address %>");
	}
	else if (this.value == 2)
	{
		$("#incident_physical_address").val("<%= Facility.find(2).address %>");
	}
	else if (this.value == 3)
	{
		$("#incident_physical_address").val("<%= Facility.find(3).address %>");
	}
	else if (this.value == 4)
	{
		$("#incident_physical_address").val("<%= Facility.find(4).address %>");
	}
	else if (this.value == 5)
	{
		$("#incident_physical_address").val("<%= Facility.find(5).address %>");
	}
	else if (this.value == 6)
	{
		$("#incident_physical_address").val("<%= Facility.find(6).address %>");
	}
	else if (this.value == 7)
	{
		$("#incident_physical_address").val("<%= Facility.find(7).address %>");
	}
	else if (this.value == 8)
	{
		$("#incident_physical_address").val("<%= Facility.find(8).address %>");
	}
	else if (this.value == 9)
	{
		$("#incident_physical_address").val("<%= Facility.find(9).address %>");
	}
	else if (this.value == 10)
	{
		$("#incident_physical_address").val("<%= Facility.find(10).address %>");
	}
	else if (this.value < 0)
	{
		$("#incident_physical_address").val("");
	}
	else
	{
		$("#incident_physical_address").val("");
	}
}).trigger('change');